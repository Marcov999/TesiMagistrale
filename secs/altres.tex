L'ultimo esempio è quello mostrato in \cite[Section 5.2]{CMS}; si tratta di un altro esempio di dominio non di tipo Goldilocks\marginpar{È taut? Non è taut? C'è modo di vederlo?} che soddisfa la condizione di visibilità.

Iniziamo considerando la funzione $\Phi_0:\mathbb{C}^2\longrightarrow\mathbb{R}$ definita da
$$\Phi_0(z):=\begin{cases}
    \exp(-1/\|z\|^2)-\mathfrak{Im}(z_2) &\mbox{se }z=(z_1,z_2)\not=(0,0)\\
    0 &\mbox{se }z=0.
\end{cases}$$

Poiché la matrice hessiana di $\Phi_0$ (vista come funzione da $\mathbb{R}^4$ in $\mathbb{R}$) è la stessa della funzione $\exp(-1/\|z\|^2)$ estesa a $0$ nell'origine, che è convessa vicino all'origine, esiste $0<\epsilon<1$ tale che $\Phi_0$ è convessa in $\mathbb{B}^2_{2\epsilon}$. Scegliamo inoltre una funzione liscia $\psi:\mathbb{C}^2\longrightarrow[0,1]$ tale che $\psi\equiv 1$ in $\mathbb{B}^2_{2\epsilon}$ e $\text{supp}\,{\psi}\subseteq \mathbb{B}^2_{3\epsilon}$. Poniamo $\Phi:=\Phi_0\cdot\psi$ e $c_0:=\displaystyle\sup_{z\in\mathbb{C}^2}\big(-\Phi(z)\big)>0$.

Scegliamo adesso una funzione liscia $\chi:[0,+\infty)\longrightarrow[0,+\infty)$ che sia identicamente nulla in $[0,\epsilon^2]$, strettamente crescente in $[\epsilon^2,+\infty)$ e strettamente convessa in $\big(\epsilon^2,(\epsilon+\delta)^2\big)$ per $0<\delta<\epsilon$; per esempio, possiamo prendere $\chi(t)=\exp\big(-1/(t-\epsilon^2)\big)$ per $t>\epsilon^2$ e $0$ altrove. Poniamo $c_1:=\chi\big((\epsilon+\delta/2)^2\big)$ e $C:=c_0/c_1$. Definiamo
$$\Psi(z):=C\chi(\|z\|^2)$$
per ogni $z\in\mathbb{C}^2$.

Osserviamo che:
\begin{itemize}
    \item la funzione $\Psi$ è liscia e non negativa su tutto $\mathbb{C}^2$, nulla in $\overline{\mathbb{B}^2_\epsilon}$, e strettamente convessa e strettamente positiva in $\mathbb{B}^2_{\epsilon+\delta}\setminus\overline{\mathbb{B}^2_\epsilon}$;
    \item si ha $\Psi(z)\ge c_0$ per ogni $z\in\mathbb{C}^2\setminus\mathbb{B}^2_{\epsilon+\delta/2}$, da cui $\Psi(z)+\Phi(z)\ge 0$ per ogni $z\in\mathbb{C}^2\setminus\mathbb{B}^2_{\epsilon+\delta/2}$;
    \item si ha $\Psi(z)+\Phi(z)=\Phi(z)=\Phi_0(z)$ per ogni $z\in\mathbb{B}^2_\epsilon$.
\end{itemize}

A breve ci servirà sapere cos'è il tipo di un punto nel senso di D'Angelo. Nella sezione \ref{Ulteriori risultati} diremo qualcosa di più riguardo a queste definizioni.

\begin{defn}
    Dati un aperto $A\subseteq\mathbb{C}^n$, una funzione $g\in C^\infty(A)$ e $p\in A$, \textit{l'ordine (o la molteplicità) di $g$ in $p$} è $v_p(g)$, il grado del primo termine non nullo dello sviluppo di Taylor in $p$ di $g-g(p)$. Se la funzione è a valori in più variabili, si considera il minimo degli ordini di contatto delle componenti.
\end{defn}

\begin{defn}
    Un dominio $\Omega\subseteq\mathbb{C}^n$ ha bordo $C^\infty$ se esiste una funzione $\rho\in C^\infty(\mathbb{C}^n)$ tale che $\Omega=\{\rho(z)<0\}$ e $\diff\rho\not=0$ in ogni punto di $\partial\Omega$.
\end{defn}
    
\begin{defn} \label{discanal}
    Siano $\Omega\subseteq\mathbb{C}^n$ un dominio con bordo $C^\infty$ e $\xi\in\partial\Omega$. L'insieme dei \textit{dischi analitici} che toccano il bordo di $\Omega$ in $\xi$ e che sono lisci nell'origine è dato da
    $$\mathcal{D}_{\xi}=\{f\in\text{Hol}(\mathbb{D},\mathbb{C}^n)\mid f(0)=\xi\text{ e }f'(0)\not=0\}.$$
\end{defn}

\begin{defn}
    Siano $\Omega\subseteq\mathbb{C}^n$ un dominio con bordo $C^\infty$ e $\xi\in\partial\Omega$. Il \textit{tipo} di $\xi$ è dato da
    $$\Delta_1(\xi):=\sup_{f\in\mathcal{D}_{\xi}} v_0(\rho\circ f).$$
\end{defn}

Consideriamo adesso il dominio
$$\Omega:=\{z=(z_1,z_2)\in\mathbb{C}^2\mid \rho(z):=\Psi(z)+\Phi(z)<0\}.$$

Notiamo che $\Omega\subseteq\mathbb{B}^2_{\epsilon+\delta/2}$, dove $\rho=\Psi+\Phi_0$, che è una funzione convessa; per cui $\Omega$ è un dominio convesso limitato. Calcolando il gradiente di $\rho$, vediamo che esiste al più un punto $p_0\in\partial\Omega$ dove il gradiente si annulla, che è della forma $p_0=(0,ic)$; inoltre, $p_0\in\overline{\mathbb{B}^2_{\epsilon+\delta/2}}\setminus\overline{\mathbb{B}^2_\epsilon}$. Dunque $\Omega$ è un dominio limitato e convesso tale che $\partial\Omega\setminus\{p_0\}$ è liscio. Si ha anche che ogni punto di $(\partial\Omega\setminus\{p_0\})\cap(\mathbb{B}^2_{\epsilon+\delta}\setminus\overline{\mathbb{B}^2_\epsilon})$ è un punto del bordo di $\Omega$ strettamente convesso (perché in $\mathbb{B}^2_{\epsilon+\delta}\setminus\overline{\mathbb{B}^2_\epsilon}$ la funzione $\Psi$ è strettamente convessa e la funzione $\Phi_0$ è convessa); dunque è pseudoconvesso (segue dalla dimostrazione di \cite[Proposition 2.1.13]{A1}) e, per \cite[Corollary 5.6]{D'A}, è un punto di tipo finito. Poniamo $S:=\partial\Omega\cap\overline{\mathbb{B}^2_\epsilon}$ e osserviamo che
$$S=\overline{\mathbb{B}^2_\epsilon}\cap\{z\in\mathbb{C}^2\mid \Phi_0(z)=0\};$$
si ha anche che ogni punto di $S$ diverso da $(0,0)$ è un punto del bordo di $\Omega$ di tipo finito (perché $\Phi_0$ è strettamente convessa in $\overline{\mathbb{B}^2_\epsilon}\setminus\{(0,0)\}$, per cui ogni punto di $S$ è strettamente convesso). \\

Possiamo ora procedere a dimostrare che $\Omega$ è $(\lambda,\kappa)$-visibile per ogni $\lambda \ge 1$ e $\kappa>0$. Poniamo
$$M_{\Omega,U}(r):=\sup\left\{\frac{1}{K_\Omega(x;v)}\mid x\in\Omega\cap U,\delta_\Omega(x) \le r, \|v\|=1\right\}.$$

\begin{thm} \label{extvis}
    (\cite[Theorem 1.9]{CMS}) Sia $\Omega$ un dominio limitato di $\mathbb{C}^d$. Sia $S\subseteq\partial\Omega$ un insieme chiuso tale che per ogni $p,q\in\partial\Omega$ con $p\not=q$ esistono $p'\in\partial\Omega$ e $r>0$ tali, detta $B(p',r)$ la palla euclidea di centro $p'$ e raggio $r$, che:
    \begin{nlist}
        \item si ha $p\in B(p',r)$ e $q\in\partial\Omega\setminus\overline{B(p',r)}$;
        \item si ha $S\cap\partial B(p',r)=\emptyset$.
    \end{nlist}
    
    Inoltre, supponiamo che per ogni $q'\in\partial\Omega\setminus S$ esistono un intorno $U$ di $q'$, uno $z_0\in\Omega$ e una funzione $C^1$ strettamente crescente $f:(0,+\infty)\longrightarrow\mathbb{R}$, con $f(t)\longrightarrow+\infty$ per $t\longrightarrow+\infty$, tali che:
    \begin{enumerate}[label={(\arabic*)}]
        \item si ha $k_\Omega(z_0,z) \le f\big(1/\delta_\Omega(z)\big)$ per ogni $z\in\Omega\cap U$;
        \item si ha $M_{\Omega,U}(r)\longrightarrow 0$ per $r\longrightarrow 0$;
        \item esiste $r_0>0$ tale che $\displaystyle\int_0^{r_0}\frac{M_{\Omega,U}(r)}{r^2}f'\left(\frac{1}{r}\right)\diff r<+\infty$.
    \end{enumerate}

    Allora $\Omega$ è $(\lambda,\kappa)$-visibile per ogni $\lambda \ge 1$ e $\kappa>0$.
\end{thm}

\begin{proof}
    La dimostrazione è molto simile a quella del Teorema \ref{gold_is_vis}. Supponiamo per assurdo che esistano $\lambda \ge 1$ e $\kappa>0$ tali che $\Omega$ non sia $(\lambda,\kappa)$-visibile. Allora esistono $p,q\in\partial\Omega$ con $p\not=q$, due successioni $\{p_n\}_{n\in\mathbb{N}}$ e $\{q_n\}_{n\in\mathbb{N}}$, convergenti rispettivamente a $p$ e $q$, e una successione $\{\gamma_n\}_{n\in\mathbb{N}}$ di $(\lambda,\kappa)$-simil-geodetiche, con $\gamma_n:[a_n,b_n]\longrightarrow\Omega$ e $\gamma_n(a_n)=p_n$ e $\gamma_n(b_n)=q_n$ per ogni $n\in\mathbb{N}$, tali che
    $$\max_{a_n\le t\le b_n}\delta_\Omega\big(\gamma_n(t)\big)\longrightarrow 0\text{ per }n\longrightarrow+\infty.$$

    Per ipotesi esistono $p'\in\partial\Omega$ e $r>0$ tali che valgano (i) e (ii). Poiché $p_n\longrightarrow p$ e $q_n\longrightarrow q$ per $n\longrightarrow+\infty$, possiamo assumere senza perdita di generalità che $\{p_n\}_{n\in\mathbb{N}}\subseteq B(p',r)$ e $\{q_n\}_{n\in\mathbb{N}}\subseteq \Omega\setminus\overline{B(p',r)}$. Poiché $\gamma_n$ è una curva continua che collega $p_n$ e $q_n$, deve esistere $\alpha_n\in(a_n,b_n)$ tale che $\xi_n:=\gamma_n(\alpha_n)\in\partial B(p',r)$; a meno di sottosuccessioni, possiamo assumere che $\xi_n\longrightarrow\xi\in\partial\Omega\cap\partial B(p',r)$ per $n\longrightarrow+\infty$. Per (ii) si ha che $\xi\in\partial\Omega\setminus S$; allora esistono, per ipotesi, un intorno $U$ di $\xi$, uno $z_0\in\Omega$ e una funzione $C^1$ strettamente crescente $f:(0,+\infty)\longrightarrow\mathbb{R}$ tali che valgano (1), (2) e (3). Osserviamo che tali ipotesi sono ancora soddisfatte se prendiamo un intorno $V \subseteq U$ di $\xi$, per cui, a meno di prendere un intorno più piccolo, possiamo supporre che $\overline{U}\cap(S\cup\{p,q\})=\emptyset$; inoltre, di nuovo a meno di sottosuccessioni, possiamo anche supporre che $q_n\not\in\overline{U}$.

    Sia $\epsilon>0$ tale che $\overline{B(\xi,\epsilon)}\subseteq U$; poiché $\xi_n\longrightarrow \xi$ per $n\longrightarrow+\infty$, possiamo assumere senza perdita di generalità che $\{\xi_n\}_{n\in\mathbb{N}}\subseteq B(\xi,\epsilon)$. Per ogni $n\in\mathbb{N}$ poniamo
    $$\beta_n:=\inf\{t\in[\alpha_n,b_n]\mid \gamma_n(t)\in\partial B(\xi,\epsilon)\};$$
    per definizione di $\beta_n$ e per il fatto che $\partial B(\xi,\epsilon)$ è chiuso, si ha $\gamma_n(\beta_n)\in\partial B(\xi,\epsilon)$ e $a_n<\alpha_n<\beta_n<b_n$. Poniamo $\sigma_n:=\gamma_n\restrict{[\alpha_n,\beta_n]}:[\alpha_n,\beta_n]\longrightarrow\Omega$ per ogni $n\in\mathbb{N}$. Allora, poiché $\gamma_n(\alpha_n)=\xi_n\in B(\xi,\epsilon)$, per definizione di $\beta_n$ dev'essere $\sigma_n([\alpha_n,\beta_n])\subseteq\overline{B(\xi,\epsilon)}\subseteq U$. Notiamo che, essendo la restrizione della $(\lambda,\kappa)$-simil-geodetica $\gamma_n$, anche $\sigma_n$ è una $(\lambda,\kappa)$-simil-geodetica per ogni $n\in\mathbb{N}$; inoltre, si ha
    $$\max_{\alpha_n\le t\le \beta_n}\delta_\Omega\big(\sigma_n(t)\big)\le\max_{a_n\le t\le b_n}\delta_\Omega\big(\gamma_n(t)\big)\longrightarrow 0\text{ per }n\longrightarrow+\infty.$$

    Adesso, a meno di riparametrizzare le curve $\sigma_n$, possiamo assumere che $\alpha_n\le 0\le\beta_n$ e che
    $$\max_{\alpha_n\le t\le \beta_n}\delta_\Omega\big(\sigma_n(t)\big)=\delta_\Omega\big(\sigma_n(0)\big)$$
    per ogni $n\in\mathbb{N}$. Per la Proposizione \ref{simillip} esiste una costante $C>0$, che dipende solo da $\lambda$, tale che le $(\lambda,\kappa)$-simil-geodetiche di $\Omega$ sono $C$-lipschitziane rispetto alla distanza euclidea. Allora, applicando il teorema di Ascoli-Arzelà e passando a un'opportuna sottosuccessione con un procedimento diagonale, possiamo assumere che:
    \begin{itemize}
        \item si ha $\alpha_n\longrightarrow\alpha\in[-\infty,0]$ e $\beta_n\longrightarrow\beta\in[0,+\infty]$ per $n\longrightarrow+\infty$;
        \item la successione $\{\sigma_n\}_{n\in\mathbb{N}}$ converge uniformemente sui compatti di $(\alpha,\beta)$ a una curva continua $\sigma:(\alpha,\beta)\longrightarrow \overline{B(\xi,\epsilon)}\subseteq U$;
        \item si ha $\sigma_n(\alpha_n)=\xi_n\longrightarrow\xi$ e $\sigma_n(\beta_n)=\eta_n\longrightarrow\eta$ per $n\longrightarrow+\infty$, con $\xi\in\partial\Omega\cap\partial B(p',r)$ e $\eta\in\partial\Omega\cap\partial B(\xi,\epsilon)$.
    \end{itemize}

    Ovviamente dev'essere $\xi\not=\eta$; quindi, dato che $\|\sigma(\alpha_n)-\sigma(\beta_n)\| \le C(\beta_n-\alpha_n)$ per ogni $n\in\mathbb{N}$, si ha che $C(\beta-\alpha)\ge\|\xi-\eta\|>0$, per cui $\beta>\alpha$. \\

    Mostriamo adesso che $\sigma$ è costante. Vediamo innanzitutto che per ogni $n\in\mathbb{N}$ e per quasi ogni $t\in(\alpha_n,\beta_n)$ si ha
    $$\|\sigma_n'(t)\| \le \lambda M_{\Omega,U}\Big(\delta_\Omega\big(\sigma_n(t)\big)\Big).$$
    
    Sia $t\in(\alpha_n,\beta_n)$ tale che $\sigma_n'(t)$ esiste e $\|\sigma_n'(t)\|\not=0$ (altrimenti la disuguaglianza è immediata). Ricordiamo che ogni $\sigma_n$ è una $(\lambda,\kappa)$-simil-geodetica, per cui $K_\Omega\big(\sigma_n(t);\sigma_n'(t)\big)\le\lambda$; quindi, dato che $\sigma_n([\alpha_n,\beta_n])\subseteq U$, si ha
    $$\|\sigma_n'(t)\|\le \frac{\lambda}{K_\Omega\left(\sigma_n(t);\frac{\sigma_n'(t)}{\|\sigma_n'(t)\|}\right)}\le\lambda M_{\Omega,U}\Big(\delta_\Omega\big(\sigma_n(t)\big)\Big),$$
    come voluto. Adesso, poiché $\displaystyle\max_{\alpha_n\le t\le \beta_n}\delta_\Omega\big(\sigma_n(t)\big)\longrightarrow 0$ per $n\longrightarrow+\infty$, dal fatto che $M_{\Omega,U}$ è crescente e dall'ipotesi (2) si ha che $M_{\Omega,U}\Big(\delta_\Omega\big(\sigma_n(t)\big)\Big)\longrightarrow 0$ uniformemente. Ma allora, dati $\alpha<u\le w<\beta$, si ha
    \begin{align*}
        \|\sigma(u)-\sigma(w)\|&\le \lim_{n\longrightarrow+\infty}\|\sigma_n(u)-\sigma_n(w)\| \\
        =&\lim_{n\longrightarrow+\infty}\left\|\int_u^w\sigma_n'(t)\diff t\right\|\le \limsup_{n\longrightarrow+\infty} \int_u^w \|\sigma_n'(t)\|\diff t\\
        &\le \lambda\limsup_{n\longrightarrow+\infty} \int_u^w M_{\Omega,U}\Big(\delta_\Omega\big(\sigma_n(t)\big)\Big)\diff t=0;
    \end{align*}
    dunque $\sigma$ è costante su $(\alpha,\beta)$. \\

    Vogliamo ottenere una contraddizione mostrando anche che $\sigma$ non è costante. Distinguiamo due casi.

    Caso 1: sia $\alpha$ che $\beta$ sono finiti.
\end{proof}

\begin{cor}
    (\cite[Corollary 1.10]{CMS}) Sia $\Omega$ un dominio limitato di $\mathbb{C}^d$. Supponiamo che esista un compatto $S\subseteq\partial\Omega$ tale che $S_a$, l'insieme dei punti di accumulazione di $S$, sia finito, e inoltre che ogni punto $p\in\partial\Omega\setminus S$ sia un punto liscio di bordo pseudoconvesso e di tipo finito. Allora $\Omega$ è $(\lambda,\kappa)$-visibile per ogni $\lambda \ge 1$ e $\kappa>0$.
\end{cor}

\begin{proof}
    Mostriamo che, dati $p,q\in\partial\Omega$ con $p\not=q$, sono soddisfatte le ipotesi (i) e (ii) del Teorema \ref{extvis}. Per farlo, consideriamo $S_0:=S_a\cup\{p,q\}$. Allora, per finitezza di $S_0$, esiste $\epsilon_0>0$ tale che $\overline{B(x,\epsilon_0)}\cap\overline{B(x',\epsilon_0)}=\emptyset$ per ogni $x,x'\in S_0$. Adesso poniamo
    $$S_1:=(S\cup\{p,q\})\setminus\left(\bigcup_{x\in S_a}\overline{B(x,\epsilon_0)}\right);$$
    notiamo che $S_1$ è un insieme finito disgiunto dal compatto $K:=\displaystyle\bigcup_{x\in S_a}\overline{B(x,\epsilon_0)}$. Dunque esiste $\epsilon_1>0$ tale che:
    \begin{itemize}
        \item si ha $\overline{B(y,\epsilon_1)}\cap K=\emptyset$ per ogni $y\in S_1$;
        \item $\overline{B(y,\epsilon_1)}\cap\overline{B(y',\epsilon_1)}=\emptyset$ per ogni $y,y'\in S_1$ con $y\not=y'$.
    \end{itemize}
    
    Distinguiamo ora due casi. \\

    Caso 1: $p\not\in K$.

    Basta prendere $p'=p$ e $r=\epsilon_1$. \\

    Caso 2: $p\in K$.

    In questo caso esiste un $x_0\in S_a$ tale che $p\in\overline{B(x_0,\epsilon_0)}$. Consideriamo la seguente famiglia di insiemi con chiusure mutualmente disgiunte:
    $$\mathcal{B}:=\{B(x,\epsilon_0)\mid x\in S_a\}\cup\{B(y,\epsilon_1)\mid y\in S_1\};$$
    allora esiste $\epsilon_2>0$ tale che $\epsilon_2<\text{dist}(B_1,B_2)/4$ per ogni $B_1,B_2\in\mathcal{B}$. Segue che $\mathcal{C}:=\{B(x,\epsilon_0+\epsilon_2)\mid x\in S_a\}\cup\{B(y,\epsilon_1+\epsilon_2)\mid y\in S_1\}$ è una famiglia di insiemi con chiusure mutualmente disgiunte. Allora basta prendere $p'=x_0$ e $r=\epsilon_1+\epsilon_2$. \\

    Per concludere mostriamo adesso che, per ogni $q'\in\partial\Omega\setminus S$, esistono un intorno $U$ e una funzione $f$ che soddisfano le ipotesi (1), (2) e (3) del Teorema \ref{extvis}. Fissiamo un tale $q'$; allora sono soddisfatte le ipotesi di \cite[Theorem 1]{Ch}\marginpar{Non sono tanto convinto di 'sta cosa che qui lo cito e basta, mentre dopo lo cito esplicitamente; a questo punto mi domando se non sia meglio riorganizzare anche le ultime sezioni} e \cite[Proposition 2.5]{FR}, per cui esistono un intorno $U$ di $q'$, due costanti $c,\epsilon>0$, un punto $z_0\in\Omega$ e una costante $A$ tali che, ponendo $f(x):=A+\dfrac{1}{2}\log{x}$ per ogni $x\in(0,+\infty)$, si ha
    \begin{gather*}
        k_\Omega(z,z_0) \le f\big(1/\delta_\Omega(z)\big)\\
        \text{e}\\
        K_\Omega(z;v) \ge c\frac{\|v\|}{\delta_\Omega(z)^{\epsilon}}
    \end{gather*}
    per ogni $z\in\Omega\cap U$ e $v\in\mathbb{C}^d$. Ne consegue facilmente che le ipotesi (1), (2) e (3) del Teorema \ref{extvis} sono soddisfatte, come voluto.
\end{proof}

CONCLUDERE MOSTRANDO CHE $S$ SODDISFA\marginpar{Ma siamo sicuri? Controllare bene per sicurezza} LE IPOTESI DEL COROLLARIO. \\

Mostriamo adesso che $\Omega$ non soddisfa la condizione (1) nella Definizione \ref{gold}. Iniziamo notando che
$$\Omega\cap\mathbb{B}^2_{\epsilon/2}=\{(z_1,z_2)\in\mathbb{B}^2_{\epsilon/2}\mid \mathfrak{Im}(z_2)>\exp(-1/\|z\|^2)\};$$
dunque, per $r>0$ sufficientemente piccolo, si ha che $p_r:=(0,ir)\in\Omega$. Poniamo $v:=(1,0)$ e $s:=\sqrt{\dfrac{1}{\log(1/r)}-r^2}$; allora la funzione $\varphi:\mathbb{D}\longrightarrow\Omega$ data da $\varphi(\zeta)=p_r+\zeta sv$ è ben definita (cioè l'immagine è effettivamente contenuta in $\Omega$) e olomorfa, per cui
$$K_\Omega(p_r;v) \le \frac{1}{s}.$$

Adesso, poiché $(0,0)\in\partial\Omega$, si ha $\delta_\Omega(p_r) \le r$, per cui
$$M_\Omega(r) \ge \frac{1}{K_\Omega(p_r;v)} \ge s=\sqrt{\frac{1}{\log(1/r)}-r^2};$$
per cui ci basta mostrare che, per $r_0>0$ sufficientemente piccolo affinché l'integranda sia definita, si ha
$$\int_0^{r_0}\frac{1}{r}\sqrt{\frac{1}{\log(1/r)}-r^2}\diff r=+\infty.$$

Ciò segue facilmente confrontando con la funzione $r \longmapsto \dfrac{1}{r}\cdot\dfrac{1}{\sqrt{\log(1/r)}}$.